<mat-card class="booking-passengers-card">
  <mat-card-content class="booking-passengers-card__content">
    <div class="booking-passengers-card__title title title--medium title--primary-dark">{{ order + 1 }}. {{ type | titlecase }}</div>

    <form
      [formGroup]="passengerForm"
      class="booking-passengers-card__form passenger-form"
    >
      <div class="passenger-form__person-data">
        <mat-form-field>
          <mat-label>First name</mat-label>
          <input
            formControlName="firstName"
            matInput
          >
          <mat-icon
            matTooltip="Add the passenger's name as it is written on their documents (passport or ID). Do not use any accents or special characters. Do not use a nickname. "
            matTooltipPosition="right"
            matSuffix
          >
            info
          </mat-icon>
          <mat-error *ngIf="passengerForm.get('firstName')?.invalid && (passengerForm.get('firstName')?.dirty || passengerForm.get('firstName')?.touched)">
            <span *ngIf="passengerForm.get('firstName')?.hasError('required')">First Name is required</span>
            <span *ngIf="passengerForm.get('firstName')?.hasError('pattern')">Invalid character</span>
          </mat-error>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Last name</mat-label>
          <input
            formControlName="lastName"
            matInput
          >
          <mat-icon
            matTooltip="Add the passenger's name as it is written on their documents (passport or ID). Do not use any accents or special characters. Do not use a nickname. "
            matTooltipPosition="right"
            matSuffix
          >
            info
          </mat-icon>
          <mat-error *ngIf="passengerForm.get('lastName')?.invalid && (passengerForm.get('lastName')?.dirty || passengerForm.get('lastName')?.touched)">
            <span *ngIf="passengerForm.get('lastName')?.hasError('required')">Last Name is required</span>
            <span *ngIf="passengerForm.get('lastName')?.hasError('pattern')">Invalid character</span>
          </mat-error>
        </mat-form-field>

        <mat-button-toggle-group
          formControlName="gender"
          name="chooseGender"
          aria-label="Choose Gender"
        >
          <mat-button-toggle value="male">Male</mat-button-toggle>
          <mat-button-toggle value="female">Female</mat-button-toggle>
        </mat-button-toggle-group>

        <mat-form-field
          floatLabel="always"
          appearance="fill"
        >
          <mat-label>Date of birth</mat-label>
          <input
            formControlName="dateOfBirth"
            matInput
            [min]="minBirthDate"
            [max]="maxBirthDate"
            [matDatepicker]="picker"
            placeholder="MM/DD/YYYY"
          >
          <mat-datepicker-toggle
            matIconSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error *ngIf="passengerForm.get('dateOfBirth')?.invalid && (passengerForm.get('dateOfBirth')?.dirty || passengerForm.get('dateOfBirth')?.touched)">
            <span *ngIf="passengerForm.get('dateOfBirth')?.hasError('required')">Date of Birth is required</span>
            <span *ngIf="passengerForm.get('dateOfBirth')?.hasError('invalidDate')">Invalid Date of Birth</span>
          </mat-error>
        </mat-form-field>
      </div>
      <div
        formGroupName="baggage"
        class="passenger-form__baggage-data baggage"
      >
        <div class="baggage__field">
          <mat-form-field class="baggage__amount">
            <input
              type="number"
              formControlName="cabin"
              placeholder="0-3"
              matInput
            >
            <mat-hint>3 bags max., total max. 12&nbsp;kg</mat-hint>
            <mat-error *ngIf="passengerForm.get('baggage.cabin')?.invalid">Must contain from 0 to 3 bags</mat-error>
          </mat-form-field>
          <span class="baggage__type">cabin bag(s)</span>
        </div>

        <div class="baggage__field">
          <mat-form-field class="baggage__amount">
            <input
              type="number"
              formControlName="personal"
              placeholder="0-3"
              matInput
            >
            <mat-hint>3 bags max., total max. 8&nbsp;kg</mat-hint>
            <mat-error *ngIf="passengerForm.get('baggage.personal')?.invalid">Must contain from 0 to 3 bags</mat-error>
          </mat-form-field>
          <span class="baggage__type">personal item(s)</span>
        </div>

        <div class="baggage__field">
          <mat-form-field class="baggage__amount">
            <input
              type="number"
              formControlName="checked"
              placeholder="0-3"
              matInput
            >
            <mat-hint>3 bags max., total max. 23&nbsp;kg</mat-hint>
            <mat-error *ngIf="passengerForm.get('baggage.checked')?.invalid">Must contain from 0 to 3 bags</mat-error>
          </mat-form-field>
          <span class="baggage__type">checked bag(s)</span>
        </div>
      </div>
    </form>

    <div
      *ngIf="!isInfant"
      class="booking-passengers-card__options"
    >
      <mat-slide-toggle class="airways-slide-toggle">
        <mat-icon>wheelchair_pickup</mat-icon>
        Need special assistance?
      </mat-slide-toggle>
    </div>
  </mat-card-content>
</mat-card>
